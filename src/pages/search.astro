---
import Grid from "@/layouts/Grid.astro";
import '@/css/docs.css'
---

<Grid>
	<link slot="head" href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <div id="search" style="margin:.75em 0;"></div>
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <script is:inline>
        window.addEventListener('load', () => {
            const params = new URLSearchParams(window.location.search)
            const query = params.get("q")
            const findInput = setInterval(() => {
                const el = document.querySelector(".pagefind-ui__search-input")
                if (el) {
                    clearInterval(findInput);
                    el.value = query
                    el.dispatchEvent(new Event("input", { bubbles: true }))
                }
            }, 50)
        })
    </script>
</Grid>

<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ 
            element: "#search",
            resetStyles: false,
            showImages: false,
            processResult: function (result) {
                result.meta.title = result.meta.title.replace(/</g, "&lt;").replace(/>/g, "&gt;")
                return result;
            }
        });
    });
</script>


