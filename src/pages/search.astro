---
import Grid from "@/layouts/Grid.astro";
import RootFileTree from "@/components/RootFileTree.astro";
import type { Markdown, Frontmatter } from "@/types";
import '@/css/grid.scss'

var pages: Markdown[] = []
try {
    pages = await Astro.glob<Frontmatter>('/src/pages/docs/**/*.md')
} catch {
    console.warn("Could not find any markdown files, create a new entry at /admin")
}
---

<Grid breadcrumb={false}>
    <RootFileTree slot="sidebar-left" pages={pages} />
	<link slot="head" href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    <div id="search" style="margin:.75em 0;"></div>
    <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ 
                element: "#search",
                resetStyles: false,
                showImages: false,
                processResult: function (result) {
                    result.meta.title = result.meta.title.replace(/</g, "&lt;").replace(/>/g, "&gt;")
                    return result;
                }
            });
        });
    </script>
</Grid>


